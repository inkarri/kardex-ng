<p-table
  [value]="pedidos"
  dataKey="pedidoPk"
  [scrollable]="true"
  scrollHeight="calc(100vh - 310px)">
  <ng-template pTemplate="header">
    <tr>
      <th style="width: 3rem"></th>
      <th>Codigo Pedido</th>
      <th>Usuario</th>
      <th>Total Pedido</th>
      <th>Tipo Pago</th>
      <th>Fecha pedido</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-product let-expanded="expanded">
    <tr>
      <td>
        <button type="button" pButton pRipple [pRowToggler]="product"
                class="p-button-text p-button-rounded p-button-plain"
                [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
      </td>
      <td>{{product.codigoPedido}}</td>
      <td>{{product.persona.nombres}} {{product.persona.apellidos}}</td>
      <td>{{product.totalPedido | currency:'USD'}}</td>
      <td>{{product.tipoPago.descripcionPago}}</td>
      <td>{{product.fechaCreacion | date: 'yyyy-MM-dd'}}</td>
    </tr>
  </ng-template>
  <ng-template pTemplate="rowexpansion" let-product>
    <tr>
      <td colspan="7">
        <div class="p-p-3">
          <p-table [value]="product.detallesPedio" dataKey="dpedidoDetallePk">
            <ng-template pTemplate="header">
    <tr>
      <th>Código Barras</th>
      <th>Descripción Articulo</th>
      <th>Cantidad pedida</th>
      <th>Rama</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-order>
    <tr>
      <td>{{order.articulo.codigoBarras}}</td>
      <td>{{order.articulo.descripcion}}</td>
      <td>{{order.cantidad}}</td>
      <td>{{order.articulo.clasificacion.nombre}}</td>
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage">
    <tr>
      <td colspan="6">No se han realizado pedidos</td>
    </tr>
  </ng-template>
</p-table>

